<div class="prototype-detail">
  <% if @prototype.image.attached? %>
    <%= image_tag @prototype.image, class: "prototype-detail__image" %>
  <% end %>
  <h2 class="prototype-detail__title"><%= @prototype.title %></h2>
  <p class="prototype-detail__catchcopy"><%= @prototype.catch_copy %></p>
  <p class="prototype-detail__concept"><%= @prototype.concept %></p>
  <p class="prototype-detail__user">by <%= link_to @prototype.user.name, user_path(@prototype.user) %></p>
</div>

<% if user_signed_in? && current_user == @prototype.user %>
  <%= link_to '編集', edit_prototype_path(@prototype), class: 'btn' %> |
  <%= button_to '削除', prototype_path(@prototype), method: :delete, data: { confirm: '本当に削除しますか？' }, class: 'btn' %>
<% end %>
<%= link_to '一覧に戻る', root_path, class: 'btn' %>

<div class="container__comments">
  <% if user_signed_in? %>
    <%= form_with model: [@prototype, @comment], local: true do |f| %>
      <div class="field">
        <%= f.label :content, "コメント" %><br />
        <%= f.text_area :content, class: :form__text %>
      </div>
      <div class="actions">
        <%= f.submit "送信する", class: :form__btn  %>
      </div>
    <% end %>
  <% end %>
  <ul class="comments_lists">
    <% @comments.each do |comment| %>
      <li class="comments_list">
        <%= comment.content %>
        <%= link_to comment.user.name, user_path(comment.user), class: :comment_user %>
      </li>
    <% end %>
  </ul>
</div> 